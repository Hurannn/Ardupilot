# PocketPilot2

# GCC 64:
env TOOLCHAIN aarch64-linux-gnu

# IMUs:
IMU Invensensev2 SPI:ICM20948 ROTATION_NONE
define INS_MAX_INSTANCES 1

# Compasses:
COMPASS AK09916:probe_ICM20948_SPI 0 ROTATION_YAW_90
define HAL_PROBE_EXTERNAL_I2C_COMPASSES 1

# Baros:
BARO BMP388 SPI:BMP388

# CAN Support:
env WITH_CAN 1
define HAL_NUM_CAN_IFACES 1

define DEFAULT_NTF_LED_TYPES (Notify_LED_Board)

define HAL_GPIO_A_LED_PIN 45
define HAL_GPIO_B_LED_PIN 46
define HAL_GPIO_C_LED_PIN 91
define HAL_GPIO_LED_ON    1

define AP_NOTIFY_BUZZER_ENABLED 1
define HAL_BUZZER_PIN 11

define HAL_OPTFLOW_PX4FLOW_I2C_BUS 2

define HAL_RANGEFINDER_LIGHTWARE_I2C_BUS 2

#            NAME      BUS SUBDEV MODE       BPW CS_PIN         LOWSPD HIGHSPD
LINUX_SPIDEV "ICM20948" 0   0      SPI_MODE_3 8   SPI_CS_KERNEL  10*MHZ 10*MHZ
LINUX_SPIDEV "BMP388"   0   1      SPI_MODE_3 8   SPI_CS_KERNEL  10*MHZ 10*MHZ

define HAL_LINUX_GPIO_PB2_ENABLED 1

define RELAY1_PIN_DEFAULT 21
define RELAY2_PIN_DEFAULT 20
define RELAY3_PIN_DEFAULT 2
define RELAY4_PIN_DEFAULT 55

# AnalogIn_IIO configuration:
define AP_HAL_LINUX_ANALOGIN_IIO_VOLTAGE_SCALING 3.0*1.8/4095.0

// FIXME: use of this define should go away:
define CONFIG_HAL_BOARD_SUBTYPE HAL_BOARD_SUBTYPE_LINUX_POCKET2
